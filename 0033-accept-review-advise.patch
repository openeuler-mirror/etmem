From 509a5306e685b18f03eea91d84bf3aa70b8a5c2e Mon Sep 17 00:00:00 2001
From: Kemeng Shi <shikemeng@huawei.com>
Date: Thu, 13 May 2021 14:20:29 +0800
Subject: [PATCH 33/50] accept review advise

Signed-off-by: Kemeng Shi <shikemeng@huawei.com>
---
 src/etmem_src/etmem_rpc.c   | 2 +-
 src/etmemd_src/etmemd_rpc.c | 4 ++--
 2 files changed, 3 insertions(+), 3 deletions(-)

diff --git a/src/etmem_src/etmem_rpc.c b/src/etmem_src/etmem_rpc.c
index 76a8cf4..384ead1 100644
--- a/src/etmem_src/etmem_rpc.c
+++ b/src/etmem_src/etmem_rpc.c
@@ -177,7 +177,7 @@ static int etmem_client_recv(int sockfd)
         recv_msg = (char *)recv_buf;
         recv_msg[recv_size] = '\0';
 
-        // check and erease finish flag
+        // check and erase finish flag
         switch (recv_msg[recv_size - 1]) {
             case (char)SUCCESS_CHAR:
                 ret = 0;
diff --git a/src/etmemd_src/etmemd_rpc.c b/src/etmemd_src/etmemd_rpc.c
index 208f6b5..969d4af 100644
--- a/src/etmemd_src/etmemd_rpc.c
+++ b/src/etmemd_src/etmemd_rpc.c
@@ -546,7 +546,7 @@ static void etmemd_rpc_send_response_msg(int sock_fd, enum opt_result result)
         ret = send(sock_fd, g_resp_msg_arr[i].msg, strlen(g_resp_msg_arr[i].msg), 0);
         if (ret < 0) {
             etmemd_log(ETMEMD_LOG_ERR, "send response to client fail, error(%s)\n",
-                    strerror(errno));
+                       strerror(errno));
         }
         break;
     }
@@ -557,7 +557,7 @@ static void etmemd_rpc_send_response_msg(int sock_fd, enum opt_result result)
     } else {
         finish_tag = FAIL_CHAR;
     }
-    ret = send(sock_fd, &finish_tag, 1, 0);
+    ret = send(sock_fd, &finish_tag, sizeof(finish_tag), 0);
     if (ret <= 0) {
         etmemd_log(ETMEMD_LOG_ERR, "send finish tag fail\n");
     }
-- 
2.27.0

